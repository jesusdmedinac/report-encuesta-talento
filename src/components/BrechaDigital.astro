---
const {
    titulo = "Brecha Digital",
    puntuacionEmpresa = 1.7,
    puntuacionPromedioSector = 1.6,
    puntuacionMetaSector = 3.75,
    textoNivelActual = "Primera etapa de desarrollo",
    nombreEmpresa = "Profermaco",
    textoOportunidadParrafo = "Profermaco se encuentra en una posición excepcional para acelerar su transformación digital. Con un nivel actual de 1.7/5 y una meta sectorial de 3.75/5, existe una valiosa oportunidad de crecimiento de 2.05 puntos que posiciona a la empresa para un desarrollo digital estratégico y sistemático. Esta brecha representa el potencial perfecto para implementar mejoras graduales y sostenibles que generen impacto real en la operación farmacéutica.",
    parrafo1 = "Los resultados revelan que Profermaco está en la primera etapa de su desarrollo digital, una fase caracterizada por fundamentos sólidos y grandes oportunidades de mejora sistemática. La organización muestra una base establecida para el crecimiento, especialmente en madurez digital (2.1/10) y una cultura organizacional receptiva (2.0/10), elementos clave para el éxito de cualquier proceso de transformación.",
    parrafo2 = "Para consolidarse como referente en el sector ferretero ecuatoriano, es fundamental que Profermaco evolucione hacia el <strong>nivel intermedio-avanzado de competencias digitales</strong> (3.75+ puntos). Este nivel representa no solo el dominio de herramientas digitales esenciales para la industria ferretera y de construcción, sino también la capacidad de optimizar procesos, tomar decisiones basadas en datos y ofrecer un servicio más eficiente a sus clientes. Las organizaciones ferreterías que alcanzan este nivel se caracterizan por equipos capacitados, procesos automatizados y una ventaja competitiva sostenible en el mercado de materiales de construcción."
} = Astro.props;

const percentil = Math.round(puntuacionEmpresa * 10);
const oportunidadValor = (puntuacionMetaSector - puntuacionEmpresa).toFixed(2);

const medidaStyle = `width: ${percentil}%; left: 0;`;
const gapStyle = `width: ${(puntuacionMetaSector - puntuacionEmpresa) * 10}%; left: ${percentil}%;`;
const promedioStyle = `left: ${puntuacionPromedioSector * 10}%;`;
const targetStyle = `left: ${puntuacionMetaSector * 10}%;`;
---
<section>
    <h2>{titulo}</h2>
    <p><strong>Nivel actual de {nombreEmpresa}: {textoNivelActual} ({puntuacionEmpresa}/10)</strong> <span class="percentile">Percentil {percentil}</span></p>
    
    <div class="bullet-graph">
        <div class="bullet-title">
            <span>Nivel de Habilidades Digitales vs. Meta del Sector</span>
        </div>
        <div class="bullet-container">
            <div class="bullet-range bullet-range-poor"></div>
            <div class="bullet-range bullet-range-fair"></div>
            <div class="bullet-range bullet-range-good"></div>
            <div class="bullet-measure" style={medidaStyle}></div>
            <div class="bullet-gap" style={gapStyle}></div>
            <div class="bullet-average" style={promedioStyle}></div>
            <div class="bullet-target" style={targetStyle}></div>
        </div>
        <div class="bullet-labels">
            <div>0</div>
            <div>2.5</div>
            <div>5</div>
            <div>7.5</div>
            <div>10</div>
        </div>
        <div class="bullet-legend">
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-low);"></div>
                <span>Primera etapa</span>
            </div>
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-medium);"></div>
                <span>Desarrollo</span>
            </div>
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-high);"></div>
                <span>Avanzado</span>
            </div>
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-company);"></div>
                <span>{nombreEmpresa} ({puntuacionEmpresa})</span>
            </div>
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-average); width: 2px; height: 15px;"></div>
                <span>Promedio sector ({puntuacionPromedioSector})</span>
            </div>
            <div class="bullet-item gap-item">
                <div class="legend-color" style="background-color: var(--color-gap);"></div>
                <span>Oportunidad de Crecimiento</span>
            </div>
            <div class="bullet-item">
                <div class="legend-color" style="background-color: var(--color-target); width: 2px; height: 15px;"></div>
                <span>Meta del sector ({puntuacionMetaSector})</span>
            </div>
        </div>
    </div>
    
    <div class="gap-banner" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(139, 92, 246, 0.03));">
        <h4 style="color: var(--color-gap);">Extraordinaria Oportunidad de Crecimiento Digital <span class="gap-value" style="background-color: var(--color-gap); color: white;">{oportunidadValor} puntos</span></h4>
        <p>{textoOportunidadParrafo}</p>
    </div>
    
    <p set:html={parrafo1} />
    
    <p set:html={parrafo2} />
</section>
